<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>BreakingBot</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>BreakingBot</h1>
          <h2>The algorithms : threads</h2>
        </header>
<hr>
<section id="main_content">
<p>Go back to the<a href="index.html" > contents page</a> or the <a href="algorithms.html" >algorithms section</a>.</p>

		
	<p>	6 threads are used by the robot and they use mutex on global variables and conditions</p>
    <pre><code>
<span style="color:#80BFFF">beginnerthread()</span> {
   //contains all the movements of the robot starting as a beginner
   }
<span style="color:#80BFFF">finisherthread()</span> { 
   //contains all the movements of the robot starting as a finisher
   }
   
<span style="color:#80BFFF">serverthread()</span> {
   //listens to the messages sent by the server
   }
int <span style="color:#80BFFF">main()</span> {
   //the main thread
   }</pre></code>

<p>On the small arena only :</p>
<pre><code>
<span style="color:#80BFFF">positionthread()</span> {
   //determines in real time the position of the robot
   } 
<span style="color:#80BFFF">messagethread()</span> {
   //sends the position of the robot to the server every 2 seconds
   }
</pre></code>




<p>We also use global variables, conditions and mutexes dealing with the threads.</p>

<p><code>x_robot ( + mutex_x_robot) //the abscissa of the robot<br/>
y_robot ( + mutex_y_robot) // the ordinate of the robot</code></p>

<p>The mutexes on x_robot and y_robot are needed because both the messagethread and the positionthread use those variables.</p>

<p><code>moving ( + mutex_moving) // boolean: 0 if the robot is moving, 1 if not</code></p>
<p> The mutex is needed, because the beginner/finisher thread, the server thread and the message thread use this variable.
For instance, when the robot is a beginner, when it reaches the top right corner of the arena, 
the beginner thread has to set moving on 1 to stop the robot, 
while the message thread needs the value of this variable to send the position of the robot 
(if moving = 1, there is no need to send the position), and the message thread is waiting for a next to come in order to set moving on 0. Three threads are trying to use/modify a value at the same time, so a mutex is needed.
</p>

<p><code>condition_moving</code> : thread condition to tell the robot when it has to move : when the condition is delivered by the server 
thread to the finisher/beginner thread (when receiving a NEXT message from the server), 
moving = 0 and  the robot can move.

<p><code>stop</code> is a boolean: 1 if the robot has to stop because of the server. It is modified by the message thread to tell the main thread to stop.</p>

<hr>
        <section id="main_content">
	<p>Go back to the<a href="index.html" > contents page</a> or the <a href="algorithms.html" >algorithms section</a>.</p>
	
          <p>Created by Sofi√®ne Jerbi, Thibault Petitjean (<a href="https://github.com/thib774" class="user-mention">@thib774</a>) and Florian Kohler (<a href="https://github.com/FlorianKohler" class="user-mention">@FlorianKohler</a>)</p>

<p>OS Course, Eurecom 2k16</p>
        </section>

        <footer>
          Breakingbot is maintained by <a href="https://github.com/thib774">thib774</a><br/>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a> and written by Florian Kohler.Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
