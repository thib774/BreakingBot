#!/bin/bash

cd ../src
arm-linux-gnueabi-gcc -I../../../ev3 -pthread -O3 -std=gnu99 -W  -Wno-comment -c beginner.c -o beginner.o
arm-linux-gnueabi-gcc beginner.o grab_gauche.o grab_droite.o mes_sonar_fast.o avancer_dst_sonar.o tourner_droite.o tourner_gauche.o avancer_dst.o reculer_dst.o demi_tour.o mes_sonar.o bouger_sonar.o poser_balle.o attraper_balle_init.o -lm -pthread  ../../../../../ev3dev-c/lib/libev3dev-c.a  -o ../executables/beginner /usr/lib/arm-linux-gnueabi/libbluetooth.a

arm-linux-gnueabi-gcc -I../../../ev3 -pthread -O3 -std=gnu99 -W -Wno-comment -c our_server.c -o our_server.o
arm-linux-gnueabi-gcc our_server.o grab_gauche.o grab_droite.o mes_sonar_fast.o avancer_dst_sonar.o tourner_droite.o tourner_gauche.o avancer_dst.o reculer_dst.o demi_tour.o mes_sonar.o bouger_sonar.o poser_balle.o attraper_balle_init.o -lm -pthread  ../../../../../ev3dev-c/lib/libev3dev-c.a  -o ../executables/our_server /usr/lib/arm-linux-gnueabi/libbluetooth.a

arm-linux-gnueabi-gcc -I../../../ev3 -pthread -O3 -std=gnu99 -W -Wno-comment -c finisher.c -o finisher.o
arm-linux-gnueabi-gcc finisher.o grab_gauche.o grab_droite.o mes_sonar_fast.o avancer_dst_sonar.o tourner_droite.o tourner_gauche.o avancer_dst.o reculer_dst.o demi_tour.o mes_sonar.o bouger_sonar.o poser_balle.o attraper_balle_init.o -lm -pthread  ../../../../../ev3dev-c/lib/libev3dev-c.a  -o ../executables/finisher /usr/lib/arm-linux-gnueabi/libbluetooth.a

attraper_balle_init(sn3, sn_sonar, value);

echo "Second compilation done"

#You need to install lftp if not done : sudo apt-get install lftp

#lftp sftp://user:password@host  -e "put local-file.name; bye"
